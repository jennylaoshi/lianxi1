<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ê—É–¥–∏–æ-–≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</title>

<style>
body {
  font-family: Arial, sans-serif;
  max-width: 700px;
  margin: 40px auto;
  padding: 20px;
  background-image: url("background.jpg"); /* ‚Üê —Ç–≤–æ–π —Ñ–æ–Ω */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
}

.container {
  background: rgba(255, 255, 255, 0.9);
  padding: 20px;
  border-radius: 10px;
}

input {
  width: 100%;
  padding: 8px;
  margin-top: 10px;
  font-size: 16px;
}

button {
  margin-top: 10px;
  padding: 8px 16px;
  font-size: 16px;
}

#result {
  margin-top: 15px;
  font-weight: bold;
  min-height: 24px;
}
</style>
</head>

<body>

<div class="container">
  <h2 id="question-title"></h2>

  <audio id="audio" controls></audio>

  <input type="text" id="answer" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç">

  <button id="checkBtn" onclick="checkAnswer()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>

  <div id="result"></div>
</div>

<script>
const questions = [
  {
    audio: "q1.mp3",
    short: ["‰∏ÉÁÇπ‰∫îÂàÜ"],
    full: ["‰ªñÊò®Â§©Êó©‰∏ä‰∏ÉÁÇπ‰∫îÂàÜËµ∑Â∫ä„ÄÇ"]
  },
  {
    audio: "q2.mp3",
    short: ["Â§úÈáå‰∏ÄÁÇπ"],
    full: ["‰ªñ‰ªäÂ§©Â§úÈáå‰∏ÄÁÇπÂêÉÊôöÈ•≠„ÄÇ"]
  },
  {
    audio: "q3.mp3",
    short: ["ÊàëÂ¶πÂ¶πÊòüÊúüÂ§©‰∏≠ÂçàË∑≥Ëàû„ÄÇ"],
    full: ["ÊàëÂ¶πÂ¶πÊòüÊúüÂ§©‰∏≠ÂçàË∑≥Ëàû„ÄÇÊàëÊ≤°ÊúâÂßêÂßê„ÄÇ"]
  },
  {
    audio: "q4.mp3",
    short: ["Êôö‰∏ä‰πùÁÇπ‰∏ÄÂàª"],
    full: ["ÊàëÁöÑÊúãÂèãÊòüÊúüÂÖ≠Êôö‰∏ä‰πùÁÇπ‰∏ÄÂàªÁù°Ëßâ„ÄÇ"]
  }
];

let current = 0;

const audioEl = document.getElementById("audio");
const answerEl = document.getElementById("answer");
const resultEl = document.getElementById("result");
const titleEl = document.getElementById("question-title");
const buttonEl = document.getElementById("checkBtn");

/* üîë –ö–õ–Æ–ß–ï–í–ê–Ø –§–£–ù–ö–¶–ò–Ø */
function normalize(str) {
  return str
    .normalize("NFKC")
    .replace(/\s+/g, "")
    .replace(/‰ªñ/g, "Â•π")   // ‚Üê ‰ªñ –∏ Â•π —Å—á–∏—Ç–∞–µ–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏
    .trim();
}

function loadQuestion() {
  titleEl.textContent = "–í–æ–ø—Ä–æ—Å " + (current + 1);
  audioEl.src = questions[current].audio;
  audioEl.load();
  answerEl.value = "";
  resultEl.textContent = "";
}

function checkAnswer() {
  const user = normalize(answerEl.value);

  if (!user) {
    resultEl.textContent = "–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç";
    resultEl.style.color = "orange";
    return;
  }

  const shortAnswers = questions[current].short.map(normalize);
  const fullAnswers = questions[current].full.map(normalize);

  if (shortAnswers.includes(user)) {
    resultEl.textContent =
      "–ù—É–∂–Ω–æ –ø–æ–ª–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –≤–∫–ª—é—á–∞—è —Ç–æ—á–∫—É –≤ –∫–æ–Ω—Ü–µ";
    resultEl.style.color = "orange";
    return;
  }

  if (fullAnswers.includes(user)) {
    resultEl.textContent = "–í–µ—Ä–Ω–æ";
    resultEl.style.color = "green";

    setTimeout(() => {
      current++;
      if (current < questions.length) {
        loadQuestion();
      } else {
        titleEl.textContent = "–ì–æ—Ç–æ–≤–æ";
        audioEl.style.display = "none";
        answerEl.style.display = "none";
        buttonEl.style.display = "none";
        resultEl.textContent = "–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã";
        resultEl.style.color = "black";
      }
    }, 800);

  } else {
    resultEl.textContent = "–ù–µ–≤–µ—Ä–Ω–æ";
    resultEl.style.color = "red";
  }
}

loadQuestion();
</script>

</body>
</html>
